<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
        <img class="logo" src="./assets/img/logo.svg"/>
    </ion-buttons>
    <ion-buttons slot="primary">
      <ion-icon class="toolbar-icons" src="./assets/img/shopping-bag.svg" color="primary"></ion-icon>
      <ion-badge *ngIf="cart.length > 0" class="notifications-badge">{{cartItemCount | async}}</ion-badge>
      <ion-menu-button class="toolbar-icons" color="primary"></ion-menu-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>
<ion-content> 
  <!--LOGIN-->
  <ion-row class="container" *ngIf="showValidator == false && muestraLogin == true">
    <form [formGroup]="login_data" >
      <ion-col size="12">
        <h3>Login</h3>
      </ion-col>
      <ion-col size="12">
        <ion-input formControlName="email" placeholder="Correo"></ion-input>
      </ion-col>
      <ion-col size="12">
        <ion-input formControlName="password" placeholder="Password"></ion-input>
      </ion-col>
      <ion-col size="12"> 
        <ion-button (click)="doLogin(login_data.value)" [disabled]="!login_data.valid">Acceder</ion-button>
      </ion-col>
      <ion-col size="12"> 
        <ion-button (click)="muestraRegistro()">Registro</ion-button>
      </ion-col>
        <p>Para poder disfrutar del contenido es necesario acceder, si no estas registrado, puedes hacerlo rapidamente.</p>
    </form>
  </ion-row>
  <!--REGISTRO-->
  <ion-row class="container" *ngIf="showRegister && muestraLogin == false">
    <form [formGroup]="register_data" >
      <ion-col size="12">
        <h3>Registro</h3>
      </ion-col>
      <ion-col size="12">
        <ion-input formControlName="email" placeholder="Correo"></ion-input>
      </ion-col>
      <ion-col size="12">
        <ion-input formControlName="password" placeholder="Password"></ion-input>
      </ion-col>
      <ion-col size="12"> 
        <ion-button (click)="register(register_data.value)" [disabled]="!register_data.valid">Registrarse</ion-button>
      </ion-col>
        <p>Para poder disfrutar del contenido es necesario acceder, si no estas registrado, puedes hacerlo rapidamente.</p>

    </form>
  </ion-row>
  <!--is not valid-->
  <ion-row class="container" *ngIf="showValidator">
    <ion-col size="12">
        <h3>¿Tienes un código?</h3>
    </ion-col>
    <ion-col size="12">
        <ion-input [(ngModel)]="couponCode" placeholder="Escríbelo aquí"></ion-input>
    </ion-col>
    <ion-col size="12"> 
        <ion-button (click)="validate()" [disabled]="couponCode===undefined">Validar</ion-button>
    </ion-col>
  </ion-row>
  <!--ya validado-->
  <ion-row class="container" *ngIf="isValid">
      <ion-col size="12">
          <h3>Tú código</h3>
      </ion-col>
      <ion-col size="12">
          <p class="coupon-code">{{couponCode}}</p>
      </ion-col>
      <ion-col size="12"> 
        <p class="warn-text">Es valido, si lo activas ahora solo podrás usarlo durante los siguientes <span class="valid-days">10</span> días</p>
        <ion-button class="primary" (click)="activate()">Activar ahora</ion-button>
        <ion-button class="cancel-btn" (click)="goHome()">Despues</ion-button>
      </ion-col>
    </ion-row>

</ion-content>
